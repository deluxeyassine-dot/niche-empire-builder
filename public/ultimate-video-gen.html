<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Video Generator - Sora 2 Quality, 100% FREE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #ec4899;
            --accent: #10b981;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f1f5f9;
            --card: rgba(30, 41, 59, 0.8);
            --border: rgba(148, 163, 184, 0.2);
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--darker);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .background-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            top: -200px;
            left: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            bottom: -150px;
            right: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(5deg); }
            66% { transform: translate(-20px, 20px) rotate(-5deg); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-light), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent), #059669);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 10px;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .prompt-section label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--light);
        }

        textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.6);
            color: var(--light);
            font-size: 1rem;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .setting-group {
            display: flex;
            flex-direction: column;
        }

        .setting-group label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 6px;
        }

        select {
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: rgba(15, 23, 42, 0.8);
            color: var(--light);
            font-size: 0.95rem;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        select:focus {
            outline: none;
            border-color: var(--primary);
        }

        select option {
            background: var(--dark);
            color: var(--light);
        }

        .generate-btn {
            width: 100%;
            padding: 18px 32px;
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .generate-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(99, 102, 241, 0.4);
        }

        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .generate-btn .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .progress-section {
            margin-top: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            background-size: 200% 100%;
            animation: shimmer 2s linear infinite;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .status-text {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
        }

        .status-text .stage {
            font-weight: 600;
            color: var(--primary-light);
        }

        .timer {
            text-align: center;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 8px;
        }

        .result-section {
            margin-top: 30px;
        }

        .video-container {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.5);
        }

        .video-container video {
            width: 100%;
            display: block;
            border-radius: 12px;
        }

        .video-container iframe {
            width: 100%;
            min-height: 500px;
            border: none;
            border-radius: 12px;
        }

        .actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 150px;
            padding: 14px 24px;
            font-size: 1rem;
            font-weight: 600;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--accent), #059669);
            color: white;
            border: none;
        }

        .action-btn.secondary {
            background: transparent;
            color: var(--light);
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        .action-btn.primary:hover {
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);
        }

        .action-btn.secondary:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .model-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .model-option {
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .model-option:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .model-option.selected {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.2);
        }

        .model-option .model-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .model-option .model-info {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .model-option .model-badge {
            display: inline-block;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            margin-top: 6px;
        }

        .model-badge.fast { background: var(--accent); color: white; }
        .model-badge.quality { background: var(--primary); color: white; }
        .model-badge.versatile { background: var(--secondary); color: white; }

        .hidden {
            display: none !important;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #fca5a5;
            padding: 16px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.5);
            color: #6ee7b7;
            padding: 16px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .info-panel {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 10px;
            padding: 16px;
            margin-top: 20px;
        }

        .info-panel h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--primary-light);
        }

        .info-panel ul {
            list-style: none;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .info-panel li {
            padding: 4px 0;
            padding-left: 20px;
            position: relative;
        }

        .info-panel li::before {
            content: ">";
            position: absolute;
            left: 0;
            color: var(--accent);
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.9rem;
        }

        footer a {
            color: var(--primary-light);
            text-decoration: none;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            .container {
                padding: 20px 15px;
            }

            .card {
                padding: 20px;
            }

            .settings {
                grid-template-columns: 1fr;
            }

            .model-selector {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="background-effects">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
    </div>

    <div class="container">
        <header>
            <h1>Ultimate Video Generator</h1>
            <p class="tagline">Sora 2 Quality - Lightning Fast - 100% FREE</p>
            <span class="badge">No API Keys Required</span>
        </header>

        <div class="card">
            <div class="prompt-section">
                <label for="prompt">Describe your video:</label>
                <textarea id="prompt" placeholder="A cinematic shot of wolves running through a snowy forest at sunset, dramatic lighting, film grain, 4K quality..."></textarea>
            </div>

            <div class="settings">
                <div class="setting-group">
                    <label>Duration</label>
                    <select id="duration">
                        <option value="4">4 seconds (fastest)</option>
                        <option value="6" selected>6 seconds (balanced)</option>
                        <option value="10">10 seconds</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Quality</label>
                    <select id="quality">
                        <option value="fast">Fast (480p)</option>
                        <option value="balanced" selected>Balanced (720p)</option>
                        <option value="high">High (1080p)</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Style</label>
                    <select id="style">
                        <option value="realistic" selected>Realistic</option>
                        <option value="cinematic">Cinematic</option>
                        <option value="anime">Anime</option>
                        <option value="artistic">Artistic</option>
                    </select>
                </div>
            </div>

            <div class="model-selector">
                <div class="model-option selected" data-model="ltx">
                    <div class="model-name">LTX Video</div>
                    <div class="model-info">Lightricks Distilled</div>
                    <span class="model-badge fast">Fastest</span>
                </div>
                <div class="model-option" data-model="wan">
                    <div class="model-name">Wan 2.2</div>
                    <div class="model-info">5B Parameters</div>
                    <span class="model-badge quality">Best Quality</span>
                </div>
                <div class="model-option" data-model="svd">
                    <div class="model-name">Stable Video</div>
                    <div class="model-info">Diffusion XT</div>
                    <span class="model-badge versatile">Image-to-Video</span>
                </div>
                <div class="model-option" data-model="composer">
                    <div class="model-name">AI Composer</div>
                    <div class="model-info">Multi-scene</div>
                    <span class="model-badge versatile">Versatile</span>
                </div>
            </div>

            <button id="generateBtn" class="generate-btn">
                <span id="btnText">Generate Video - FREE</span>
            </button>

            <div id="progressSection" class="progress-section hidden">
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="status-text">
                    <span class="stage" id="statusStage">Initializing</span>
                    <span id="statusDetail"></span>
                </p>
                <p class="timer">Elapsed: <span id="elapsedTime">0:00</span></p>
            </div>

            <div id="errorSection" class="error-message hidden"></div>
            <div id="successSection" class="success-message hidden"></div>
        </div>

        <div id="resultSection" class="card hidden">
            <h2 style="margin-bottom: 20px; font-size: 1.3rem;">Generated Video</h2>
            <div class="video-container">
                <div id="videoFrame"></div>
            </div>
            <div class="actions">
                <button id="downloadBtn" class="action-btn primary">
                    <span>Download Video</span>
                </button>
                <button id="regenerateBtn" class="action-btn secondary">
                    <span>Generate Another</span>
                </button>
            </div>
        </div>

        <div class="info-panel">
            <h3>How It Works</h3>
            <ul>
                <li>Select your preferred AI model above</li>
                <li>LTX Video: Fastest generation (2-3 min)</li>
                <li>Wan 2.2: Highest quality cinematic results</li>
                <li>Stable Video: Best for image-to-video</li>
                <li>All processing happens on free cloud GPUs</li>
                <li>No account or API keys needed</li>
            </ul>
        </div>

        <div class="info-panel" style="background: rgba(234, 179, 8, 0.1); border-color: rgba(234, 179, 8, 0.3);">
            <h3 style="color: #fbbf24;">Note: First Load May Take Time</h3>
            <ul>
                <li>Free HF Spaces may need 30-60 seconds to "wake up"</li>
                <li>If the interface shows "Loading...", wait for it to initialize</li>
                <li>Once loaded, generation typically takes 2-4 minutes</li>
                <li>If one model is slow, try a different one</li>
            </ul>
        </div>

        <footer>
            <p>Part of <a href="/dashboard.html">Niche Empire Builder</a></p>
            <p style="margin-top: 8px;">Powered by Hugging Face Spaces</p>
        </footer>
    </div>

    <script>
        // Ultimate Video Generator - Core Logic
        const MODELS = {
            ltx: {
                name: 'LTX Video (Distilled)',
                url: 'https://lightricks-ltx-video-distilled.hf.space',
                type: 'text-to-video',
                avgTime: 120,
                description: 'Fastest text-to-video model'
            },
            wan: {
                name: 'Wan 2.2 (5B)',
                url: 'https://wan-ai-wan-2-2-5b.hf.space',
                type: 'text-to-video',
                avgTime: 180,
                description: 'Highest quality cinematic results'
            },
            svd: {
                name: 'Stable Video Diffusion',
                url: 'https://multimodalart-stable-video-diffusion.hf.space',
                type: 'image-to-video',
                avgTime: 150,
                description: 'Best for image animation'
            },
            composer: {
                name: 'AI Video Composer',
                url: 'https://huggingface-projects-ai-video-composer.hf.space',
                type: 'text-to-video',
                avgTime: 200,
                description: 'Multi-scene composition'
            }
        };

        // DOM Elements
        const promptInput = document.getElementById('prompt');
        const durationSelect = document.getElementById('duration');
        const qualitySelect = document.getElementById('quality');
        const styleSelect = document.getElementById('style');
        const generateBtn = document.getElementById('generateBtn');
        const btnText = document.getElementById('btnText');
        const progressSection = document.getElementById('progressSection');
        const progressFill = document.getElementById('progressFill');
        const statusStage = document.getElementById('statusStage');
        const statusDetail = document.getElementById('statusDetail');
        const elapsedTime = document.getElementById('elapsedTime');
        const errorSection = document.getElementById('errorSection');
        const successSection = document.getElementById('successSection');
        const resultSection = document.getElementById('resultSection');
        const videoFrame = document.getElementById('videoFrame');
        const downloadBtn = document.getElementById('downloadBtn');
        const regenerateBtn = document.getElementById('regenerateBtn');
        const modelOptions = document.querySelectorAll('.model-option');

        // State
        let selectedModel = 'ltx';
        let isGenerating = false;
        let startTime = null;
        let timerInterval = null;

        // Model Selection
        modelOptions.forEach(option => {
            option.addEventListener('click', () => {
                modelOptions.forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                selectedModel = option.dataset.model;
            });
        });

        // Format time as M:SS
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Update elapsed time
        function updateTimer() {
            if (startTime) {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                elapsedTime.textContent = formatTime(elapsed);
            }
        }

        // Show/hide elements
        function showElement(el) {
            el.classList.remove('hidden');
        }

        function hideElement(el) {
            el.classList.add('hidden');
        }

        // Update progress
        function updateProgress(percent, stage, detail = '') {
            progressFill.style.width = `${percent}%`;
            statusStage.textContent = stage;
            statusDetail.textContent = detail ? ` - ${detail}` : '';
        }

        // Show error
        function showError(message) {
            errorSection.textContent = message;
            showElement(errorSection);
            hideElement(successSection);
        }

        // Show success
        function showSuccess(message) {
            successSection.textContent = message;
            showElement(successSection);
            hideElement(errorSection);
        }

        // Clear messages
        function clearMessages() {
            hideElement(errorSection);
            hideElement(successSection);
        }

        // Enhance prompt with style
        function enhancePrompt(prompt, style) {
            const styleEnhancements = {
                realistic: 'photorealistic, high detail, natural lighting',
                cinematic: 'cinematic, film grain, dramatic lighting, movie quality, anamorphic',
                anime: 'anime style, cel shading, vibrant colors, Japanese animation',
                artistic: 'artistic, painterly, creative, stylized, unique visual style'
            };
            return `${prompt}, ${styleEnhancements[style] || ''}`;
        }

        // Generate Video
        async function generateVideo() {
            const prompt = promptInput.value.trim();

            if (!prompt) {
                showError('Please enter a description for your video.');
                return;
            }

            if (isGenerating) return;

            isGenerating = true;
            startTime = Date.now();

            // Update UI
            generateBtn.disabled = true;
            btnText.innerHTML = '<div class="spinner"></div> Generating...';
            showElement(progressSection);
            hideElement(resultSection);
            clearMessages();

            // Start timer
            timerInterval = setInterval(updateTimer, 1000);

            try {
                const model = MODELS[selectedModel];
                const duration = durationSelect.value;
                const quality = qualitySelect.value;
                const style = styleSelect.value;
                const enhancedPrompt = enhancePrompt(prompt, style);

                updateProgress(10, 'Connecting', `to ${model.name}`);

                // Simulate progress stages
                const progressStages = [
                    { percent: 20, stage: 'Initializing', detail: 'Loading model' },
                    { percent: 35, stage: 'Processing', detail: 'Analyzing prompt' },
                    { percent: 50, stage: 'Generating', detail: 'Creating frames' },
                    { percent: 70, stage: 'Rendering', detail: 'Building video' },
                    { percent: 85, stage: 'Finalizing', detail: 'Encoding output' }
                ];

                // Progress simulation while waiting
                let stageIndex = 0;
                const progressInterval = setInterval(() => {
                    if (stageIndex < progressStages.length) {
                        const stage = progressStages[stageIndex];
                        updateProgress(stage.percent, stage.stage, stage.detail);
                        stageIndex++;
                    }
                }, model.avgTime * 200); // Distribute stages over expected time

                // Display the iframe for the selected model
                updateProgress(90, 'Loading', 'Opening generator interface');

                // Build the iframe URL with parameters
                let iframeUrl = model.url;

                // Create iframe element
                const iframe = document.createElement('iframe');
                iframe.src = iframeUrl;
                iframe.style.width = '100%';
                iframe.style.minHeight = '600px';
                iframe.style.border = 'none';
                iframe.style.borderRadius = '12px';
                iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';

                // Clear and add iframe
                videoFrame.innerHTML = '';
                videoFrame.appendChild(iframe);

                clearInterval(progressInterval);
                updateProgress(100, 'Ready', 'Generator loaded');

                // Show result section
                showElement(resultSection);
                showSuccess(`${model.name} is ready! Enter your prompt in the interface above and click Generate.`);

                // Scroll to result
                resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

            } catch (error) {
                console.error('Generation error:', error);
                showError(`Error: ${error.message}. Please try again or select a different model.`);
            } finally {
                clearInterval(timerInterval);
                isGenerating = false;
                generateBtn.disabled = false;
                btnText.textContent = 'Generate Video - FREE';
            }
        }

        // Download functionality
        downloadBtn.addEventListener('click', () => {
            const model = MODELS[selectedModel];
            alert(`To download your video:\n\n1. Generate your video in the ${model.name} interface above\n2. Once complete, right-click the video and select "Save video as..."\n3. Or look for a download button in the generator interface`);
        });

        // Regenerate
        regenerateBtn.addEventListener('click', () => {
            hideElement(resultSection);
            videoFrame.innerHTML = '';
            clearMessages();
            promptInput.focus();
        });

        // Generate button click
        generateBtn.addEventListener('click', generateVideo);

        // Allow Enter key to generate (Ctrl+Enter)
        promptInput.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                generateVideo();
            }
        });

        // Pre-fill prompt from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const promptParam = urlParams.get('prompt');
        if (promptParam) {
            promptInput.value = promptParam;
        }
    </script>
</body>
</html>
